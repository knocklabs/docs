---
title: How to integrate Segment to Knock
description: Learn how to connect your Segment events to Knock to power your workflows
section: Integrations > Sources
layout: integrations
---

import Callout from "../../../components/Callout";
import Image from "next/image";
import eventPayload from "../../../data/code/sources/eventPayload";

## Video Walkthrough

<div style={{ position: "relative", paddingBottom: "56.25%", height: 0 }}>
  <iframe
    src="https://www.loom.com/embed/42721f4bed1a4180821acd9530155cc7"
    frameBorder="0"
    allowFullscreen
    style={{
      position: "absolute",
      top: 0,
      left: 0,
      width: "100%",
      height: "100%",
    }}
  ></iframe>
</div>

## Getting started

Knock is a **Segment Destination**, which means you can use events coming through Segment to power actions in Knock, like triggering a workflow.

You can start routing your Segment events to Knock by creating a source of type "Segment" in the dashboard. From here, you'll be taken to the environment configuration page for the source which will give you unique URLs for each environment you have configured in Knock.

You'll copy this URL and use it to let Segment know where to send events.

## Configuring Segment

<Callout
  emoji="✨"
  text={
    <>
      <span className="font-bold">Use webhooks to connect to Knock</span> Knock
      does not have a first-party integration with Segment, so you will not find
      us in the list of destinations. Instead, you'll configure the connection
      to Knock via a webhook destination as described below.
    </>
  }
/>

In your Segment workspace, navigate to the "Destinations" tab and click "Add Destination". From here, you'll find a "Webhooks" option under "Raw Data"; this is the destination type we'll use for Knock.

Once you're in the Webhooks main page, you can go to "Configure Webhooks" and select the data source that will be populating it. Give it a name like "Knock" and choose "Fill in settings manually".

In the Knock webhook you'll see "Connection Settings". Click on this and you'll see the form to paste in the URL you copied from the Knock dashboard for the desired source environment. There's no need to add headers.

Once you've done this, save the webhook and go into the "Event Tester" tab where you can send a test event to Knock to make sure it works.

## Viewing Segment track events in Knock

Once your Segment destination is set up all events you trigger from the Segment source will be forwarded to Knock. Unique events will appear in your list of events under the Source so that you can set up actions to trigger your workflows.

From the source environment configuration page click the "View in environment" button on one of the source environments. You'll be taken to the Segment source in the environment you selected and you should see events sent. If you don't, try clicking the refresh button on the top of the list to refetch any incoming events.

## Connecting an event to an action

Once you have an event in your source's environment you can click into it to show the list of actions it's connected to. To create a new one, click "Create action", which will bring up a selector showing your available workflows. Choose one that will be triggered when Knock receives this event.

Now you'll be able to map the properties of the incoming Segment event to the fields of the workflow. Knock will automatically key **Recipients** and **Actor** to be the incoming `userId` from the event payload, but you can change this to be any key under the `properties` field from the Segment event. Similarly, you can set the **Tenant** and **Cancellation key** to be any of these fields as well.

<Callout
  emoji="✨"
  text={
    <>
      <span className="font-bold">Using proprerties</span> To use any of the
      properties fields, you can access them with dot-syntax by prefixing them
      with <code>data.</code>. For example, if your payload looks like this:
      <div className="mt-2 mb-2">
        <pre>
          <code>{eventPayload}</code>
        </pre>
      </div>
      and you wanted the commenter from the action to appear as the{" "}
      <text className="font-bold">Actor</text> in the workflow, then in the{" "}
      <text className="font-bold">Actor</text> field you would write{" "}
      <code>data.commenter.id</code> to supply their ID as the actor.
    </>
  }
/>

## Commiting the action

Actions triggered by events in Knock are stored in the commit history, just like workflows and email layouts. Once you're happy with the mapping, save it and you can commit it to your development environment right from the action page or from the commit page. Then you can choose to publish this to your other environments.

<Callout
  emoji="✨"
  text={
    <>
      <span className="font-bold">
        Committing actions that trigger workflows
      </span>{" "}
      Keep in mind that when you commit your workflows to development and
      publish them to other environments, you'll have to do the same with your
      actions to make them trigger that workflow in those environments as well.
    </>
  }
/>

## Disabling an action

Actions are automatically enabled when you create them. If you want to stop an event from triggering an action, you can go to the action page and toggle its status to "Inactive". Keep in mind that this will disable that action for the current environment only. When you're ready to trigger the action again, you can set it back to "Active".
