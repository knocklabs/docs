---
title: Add Slack channel to resource
---

The functionality described here can be found in our [Node.js example app's](https://github.com/knocklabs/knock-node-example-app/) repository.

## Use case

A classic feature regarding notifications is to connect a particular resource from your domain to a Slack channel. This is great for keeping track of what's going on in a particular topic regarding your app.

In our example application, users have access to projects which allow an unbounded number of members. Given our users probably use Slack on their organization, the application provides a simple way to connect a particular project with a particular Slack channel so all members on the project are up to date with important news related it.

## Implementation

The implementation of this feature relies mostly on the [Objects API](/send-and-manage-data/objects) and [setting channel data on them](/send-notifications/setting-channel-data).

First, we add a [connect to Slack button](https://api.slack.com/docs/slack-button), which will trigger the oAuth flow that will enable the user to select a channel on their organization. You can see how the example application implements the button on the project page [here](https://github.com/knocklabs/knock-node-example-app/blob/main/app/projects/components/AddSlackBtn.tsx#L4). After the user selects a channel, Slack will call the callback URI you specified on the button with the state you provided. In the case of the example application, it's sending the project id so when the callback gets executed, we know to which project to connect the selected channel to.

The callback implementation in the example application can be found [here](https://github.com/knocklabs/knock-node-example-app/blob/main/app/api/slack-cb.ts#L1). The callback then does an authenticated call to Slack to fetch an incoming wehbook URL, which we will use on Knock's side to power our Slack integration.

First, we need to create a representation of the project on Knock, which can be found [here](https://github.com/knocklabs/knock-node-example-app/blob/main/app/api/slack-cb.ts#L50).

```javascript
await knockClient.objects.set("projects", `${project.id}`, {
  name: project.name,
})
```

This call will add the project to the `projects` collection with its name, so when the project is listed as a recipient, we can use its name on our notifications templates.

Now that the project is a Knock object, we can set channel data on it. In this case, we will set the incoming webhook URL that was returned by Slack, and that's what Knock will use to send notifications when the project is listed as a recipient on a workflow trigger API call.


```javascript
await knockClient.objects.setChannelData(
  "projects",
  `${project.id}`,
  process.env.KNOCK_SLACK_CHANNEL_ID!,
  {
    connections: [
      {
        incoming_webhook: { url },
      },
    ],
  }
)
```

Now, we just need to add the project as a recipient whenever a workflow trigger call happens. In the case of objects, you need to specifiy their collection and id. You can see how the example applications does it [here](https://github.com/knocklabs/knock-node-example-app/blob/main/app/comments/mutations/createComment.ts#L80).

## Conclusion

Adding Slack notifications using Knock is like a walk in the park, we just added one button and one callback function, that's all it took.
