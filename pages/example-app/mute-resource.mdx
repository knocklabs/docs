---
title: Mute a resource
---

The functionality described here can be found in our [Node.js example app's](https://github.com/knocklabs/knock-node-example-app/) repository.

## What does muting mean?

Introducing notifications to features in your app greatly enhances how your users experience your app. One way of taking it one step further is to give users more control on when they should be notified. In this guide we will go over muting resource, but first, what does muting mean in this context?

On our example application, users have access to projects, and they will be notified whenever a comment or an  asset are added to it. This is great! whenever an important event happens, they will get to know about it. On the downside, if a user belongs to a fair amount of projects and not all of them are equally important, they may receive too many notifications on which the important ones may go under the radar.

One solution to this problem is for users to be able to mute all notifications that come from a particular project, resulting in only the most important updates for them going through.

## Solution

This solutution relies on two Knock features.

The first one is using [conditions](send-notifications/setting-preferences#setting-preferences-with-conditions) in user preferences. Knock allows you to set conditions on the preferences of a user on when they ought to be notified. When a user signs up on the example application, we use the preferences API to store conditions for the workflows that the app supports (`new-comment` and `new-asset`). You can see the API call following [this](https://github.com/knocklabs/knock-node-example-app/blob/main/app/auth/mutations/signup.ts#L46) link.

```javascript
await knockClient.users.setWorkflowsPreferences(`${user.id}`, {
  "new-comment": {
    conditions: [
      {
        variable: "recipient.muted_projects",
        operator: "not_contains",
        argument: "data.projectId",
      },
    ],
  },
  "new-asset": {
    conditions: [
      {
        variable: "recipient.muted_projects",
        operator: "not_contains",
        argument: "data.projectId",
      },
    ],
  },
})
```

The conditions we are adding here state that the user will be notified only if the `muted_projects` list does not contain the `projectId` that will be received as part of the workflow trigger data.

The other half of this feature is making sure that the `muted_projects` list gets updated every timer a user mutes a project, which can be found [here](https://github.com/knocklabs/knock-node-example-app/blob/main/app/projects/mutations/toggleMuted.ts).

```javascript
// get all project memberships that are muted
const mutedProjectIds = user.projectMemberships
  .filter((pm) => pm.muted)
  .map((pm) => pm.projectId)

// store the muted projects as a variable within Knock's user
await knockClient.users.identify(`${userId}`, {
  muted_projects: mutedProjectIds,
})
```

Everytime the user mutes a project we sync that information to Knock using the `identify` API endpoint.

The last remaining piece of the puzzle to make all of this work together, is making sure we are sending `projectId` as part of the workflow trigger payload, which can be found [here](https://github.com/knocklabs/knock-node-example-app/blob/main/app/comments/mutations/createComment.ts#L92).

## Conclusion

As you can see, building complex notifications features with Knock feels like a breeze, in just three API calls we have empowered our users to opt out of notifications they don't want to receive for a particular resource.
