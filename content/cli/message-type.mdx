---
title: Message types
description: Commands for managing message types in the Knock CLI.
---

<Section path="/message-type">
<ContentColumn>

Message type commands enable you to manage in-app message types in your Knock account from the CLI.

</ContentColumn>
</Section>

<Section title="Message type file structure" path="/message-type/file-structure">
<ContentColumn>

When message types are pulled from Knock, they are stored in directories named by their message type key. Each message type directory contains a `message_type.json` file that describes the message type's schema and configuration, and a `preview.html` file that contains the HTML preview template.

{/* prettier-ignore */}
<PreTextDiagram description="Local message type files structure">
{`message-types/
└── alert-banner/
    ├── message_type.json
    └── preview.html`}
</PreTextDiagram>

If you're migrating your local message type files into Knock, you can arrange them using the example file structure above.

</ContentColumn>
</Section>

<Section title="knock message-type list [flags]" path="/message-type/list">
<ContentColumn>

Display all in-app message types for an environment. Use an `--environment` flag to specify the target environment; if omitted, the Knock CLI defaults to the development environment.

### Flags

<Attributes>
  <Attribute
    name="--environment"
    type="string"
    description="The environment to use. Defaults to development."
  />
  <Attribute
    name="--hide-uncommitted-changes"
    type="boolean"
    description="Should any uncommitted changes be hidden? Defaults to false."
  />
  <Attribute
    name="--limit"
    type="number"
    description="The total number to fetch per page."
  />
  <Attribute
    name="--after"
    type="string"
    description="Fetches all entries after this cursor."
  />
  <Attribute
    name="--before"
    type="string"
    description="Fetches all entries before this cursor."
  />
  <Attribute name="--json" type="string" description="Format output as json." />
</Attributes>

</ContentColumn>
<ExampleColumn>

```bash title="Basic usage"
knock message-type list
```

```bash title="Pagination example"
knock message-type list --after=xxx
```

</ExampleColumn>
</Section>

<Section title="knock message-type new [flags]" path="/message-type/new">
<ContentColumn>

Create a new message type with a minimal configuration.

The command will create a new message type directory in your local file system. By default, this will be in the message-types resource directory set by your `knock.json` file, or the current working directory if not configured.

### Flags

<Attributes>
  <Attribute
    name="--key"
    type="string"
    description="The key for the message type. If not provided, will be prompted or inferred from the message type directory name."
  />
  <Attribute
    name="--name"
    type="string"
    description="The name for the message type. If not provided, will be generated from the key."
  />
  <Attribute
    name="--environment"
    type="string"
    description="The environment to use. Defaults to development."
  />
  <Attribute
    name="--branch"
    type="string"
    description="The branch to use. Defaults to the main branch."
  />
  <Attribute
    name="--push"
    type="boolean"
    description="Push the message type to Knock after creating it locally. Defaults to false."
  />
  <Attribute
    name="--force"
    type="boolean"
    description="Overwrites an existing message type directory without prompting for confirmation. Defaults to false."
  />
</Attributes>

</ContentColumn>
<ExampleColumn>

```bash title="Create a message type interactively"
knock message-type new
```

```bash title="Create a message type with a specific key and name"
knock message-type new --key=banner --name="Banner"
```

```bash title="Create and push a message type"
knock message-type new --key=my-message-type --push
```

</ExampleColumn>
</Section>

<Section title="knock message-type get <message_type_key> [flags]" path="/message-type/get">
<ContentColumn>

Display a single in-app message type from an environment.

Use an `--environment` flag to specify the target environment; if omitted, the Knock CLI defaults to the development environment.

### Flags

<Attributes>
  <Attribute
    name="--environment"
    type="string"
    description="The environment to use. Defaults to development."
  />
  <Attribute
    name="--hide-uncommitted-changes"
    type="boolean"
    description="Should any uncommitted changes be hidden? Defaults to false."
  />
  <Attribute name="--json" type="string" description="Format output as json." />
</Attributes>

</ContentColumn>
<ExampleColumn>

```bash title="Basic usage"
knock message-type get my-message-type
```

```bash title="Get message type in a different environment"
knock message-type get my-message-type --environment=production
```

</ExampleColumn>
</Section>

<Section title="knock message-type pull <message_type_key> [flags]" path="/message-type/pull">
<ContentColumn>

Pull one or more in-app message types from an environment into a local file system. Knock CLI will create a new message type directory or update the existing message type directory in the local file system.

By default this command will resolve to the message types resource directory via your `knock.json` file. When not set, will use the current working directory as the default. In the case of the `--all` flag, the target directory path will be resolved via your `knock.json` file or the `--message-types-dir` flag.

Note: if pulling the target message type for the first time (or all message types), Knock CLI will ask to confirm before writing to the local file system.

See the [Message type file structure](/cli/message-type/file-structure) section for details on how message type files are organized.

### Flags

<Attributes>
  <Attribute
    name="--environment"
    type="string"
    description="The environment to use. Defaults to development."
  />
  <Attribute
    name="--all"
    type="boolean"
    description={`Whether to pull all in-app message types from the specified environment into the target directory path set by \`--message-types-dir\`. Defaults to false.

When used, all contents in the target directory will be erased and replaced with all message types from the specified environment.`}
/>

  <Attribute
    name="--message-types-dir"
    type="directory"
    description="Specifies which target directory path to pull all in-app message types into. Only available to be used with --all, and defaults to the current working directory."
  />
  <Attribute
    name="--hide-uncommitted-changes"
    type="boolean"
    description="Should any uncommitted changes be hidden? Defaults to false."
  />
  <Attribute
    name="--force"
    type="boolean"
    description="Removes the confirmation prompt. Defaults to false."
  />
</Attributes>

</ContentColumn>
<ExampleColumn>

```bash title="Basic usage"
knock message-type pull my-message-type
```

```bash title="Pulling a message type in a different environment"
knock message-type pull my-message-type --environment=production
```

```bash title="Pulling all message types into ./message-types directory"
knock message-type pull --all --message-types-dir=./message-types
```

</ExampleColumn>
</Section>

<Section title="knock message-type push <message_type_key> [flags]" path="/message-type/push">
<ContentColumn>

Push one or more message types from a local file system to Knock. Knock will update an existing message type by the matching message type key, or create a new message type if it does not exist yet.

By default this command will resolve to the message types resource directory via your `knock.json` file. When not set, will use the current working directory as the default. In the case of the `--all` flag, the target directory path will be resolved via your `knock.json` file or the `--message-types-dir` flag.

Note:

- The `message-type push` command only pushes message types into the `development` environment.
- You must be directly above the target message type directory when running the `message-type push` command, so the CLI can locate the `message_type.json` file.
- You can also pass in the `--commit` flag (with an optional `--commit-message` flag) to commit the upserted changes immediately.

See the [Message type file structure](/cli/message-type/file-structure) section for details on how message type files are organized.

### Flags

<Attributes>
  <Attribute
    name="--commit"
    type="boolean"
    description="Push and commit the message type(s) at the same time. Defaults to false."
  />
  <Attribute
    name="-m, --commit-message"
    type="string"
    description="The commit message to pass when using the `--commit` flag."
  />
  <Attribute
    name="--all"
    type="boolean"
    description="Whether to push all message types from the target directory path set by `--message-types-dir`. Defaults to false."
  />
  <Attribute
    name="--message-types-dir"
    type="directory"
    description="Specifies the target directory path to find and push all message types from. Only available to be used with --all, and defaults to the current working directory."
  />
</Attributes>

</ContentColumn>
<ExampleColumn>

```bash title="Basic usage"
knock message-type push my-message-type
```

```bash title="Pushing a message type and committing with a message"
knock message-type push my-message-type \
  --commit \
  -m "Commit message"
```

```bash title="Pushing all message types from ./message-types directory"
knock message-type push --all --message-types-dir=./message-types
```

</ExampleColumn>
</Section>

<Section title="knock message-type validate <message_type_key> [flags]" path="/message-type/validate">
<ContentColumn>

Validate one or more message types from a local file system. Knock will validate the given message type payload in the same way as it would with the `message-type push` command, except without persisting those changes.

Note: Validating a message type is only done against the `development` environment.

### Flags

<Attributes>
  <Attribute
    name="--all"
    type="boolean"
    description="Whether to validate all message types from the target directory path set by `--message-types-dir`. Defaults to false."
  />
  <Attribute
    name="--message-types-dir"
    type="directory"
    description="Specifies the target directory path to find and validate all message types from. Only available to be used with --all, and defaults to the current working directory."
  />
</Attributes>

</ContentColumn>
<ExampleColumn>

```bash title="Basic usage"
knock message-type validate my-message-type
```

</ExampleColumn>
</Section>
