---
title: Update user function
description: Learn how to update a user's properties or preferences in Knock during a workflow run.
tags: ["steps", "users", "data", "functions"]
section: Designing workflows
---

An update user function updates a [user](/concepts/users) stored in Knock as a step in your workflow. Use it when you need to change a user's properties or [preferences](/preferences/overview) based on workflow context so that downstream steps, [audiences](/concepts/audiences), or other workflows see the updated data.

Common use cases include syncing state from your trigger (for example, "last notified at"), making a user eligible for a dynamic audience or [guide](/concepts/guides), or updating notification preferences from within a workflow. The update user step works the same way as [Update tenant](/send-notifications/designing-workflows/update-tenant-function) and [Update object](/send-notifications/designing-workflows/update-object-function) except for how you specify which entity to update.

## Selecting the user

By default, Knock updates the current workflow [recipient](/concepts/recipients) (the user this run is for). You can leave this default, or select a property that resolves to a user id (or use a literal user id) to update a different user (for example, the actor or a user id from your trigger data).

### Updating user preferences

The update user step can also update the user's notification preferences. Use this when workflow logic should change what channels or workflows a user is opted in or out of, or when you want to set preference defaults from within a workflow.

## Setting properties

You can set any number of properties on the user. Each property has a **key** and a **value**.

- **Key.** The property name. You can set a value for an existing user property or define a new property.
- **Value.** The value to set. You can use [Liquid](/template-editor/overview) (for example, `{{ data.foo }}` or `{{ recipient.email }}`) so the value is resolved from workflow data, the recipient, the actor, or [variables](/concepts/variables). You can also use a static value (for example, `"bar"` or `true`).

In the step editor you can edit properties as a JSON blob or in key-value form. Updated properties are stored in Knock and are available to subsequent workflow steps and to the Management API.

## Debugging

You can use the [workflow run logs](/send-notifications/debugging-workflows) to debug update user steps. The logs capture the change made by the step so you can verify the pre-state, the properties that were set, and the post-state.

Update user steps are also available in the [Management API](/mapi-reference) and can be included when you show or upsert a workflow.
