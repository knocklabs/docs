---
title: Commits
description: Learn about how Knock's commit and promotion model works.
tags:
  [
    "branches",
    "env",
    "version control",
    "versions",
    "commit",
    "promote",
    "promotion",
    "revert",
    "rollback",
    "staging",
    "active",
    "inactive",
    "diffs",
    "push",
  ]
section: Concepts
---

To version the content changes you make in your [environments](/version-control/environments), Knock uses a commit model.

## How commits work

When you make a change to a content resource (like a workflow or a layout) in the Knock dashboard, you need to commit it to your development environment before those changes will appear in workflows triggered via the API.

A few notes:

- **A commit is not a save.** When you're drafting a workflow or a template, you can save and test your changes. Saved changes apply when you're using the test runner, but they do not apply to workflow runs or guide renders that are invoked via the API. To test changes via the API, you must commit them.
- **Account-level resources are not version controlled.** Channel configurations, branding, and variables do not need to be committed, as they live at the account-level. This means that if you make a change to a channel configuration, it will update immediately on notifications sent in that environment.
- **You can commit changes using our CLI and management API.** We offer both a [Management API](/developer-tools/management-api) and a [command line interface](/developer-tools/knock-cli) for interacting with Knock resources programmatically, both of which support programmatic commits.

## Visualizing commit changes

Clicking the "Commit to development" button will show you a view of changes between your current commit and the most recent version of the resource that you're updating. Commit diffs are also available on your full commit log (viewable on the "Commits" page in your dashboard), so you can view the commit history for a resource and know exactly what was changed with each commit.

![Commit diffs in Knocks version control](/images/commit-diff-showcase.gif)

## Promoting commits

Knock is designed to allow large teams to create and manage notifications at scale. That means that
changes must be versioned, tested, and promoted to production environments, so that if there are
any issues they can be rolled back with ease.

Knock uses a model where all changes are first made in the development environment, before being **promoted** to the production environment.

<Callout
  type="warning"
  title="Note."
  text={
    <>
      There is one exception to the commit and promotion process: the{" "}
      <a href="/concepts/workflows#workflow-status">active/inactive status</a>{" "}
      of a workflow.
      <br />
      <br />
      Status is managed outside of promotion so you disable a workflow in any environment
      instantly. A workflow's status is specific to each environment.
    </>
  }
/>

You can promote your commits from a given content resource's page. You can also view all commits in one place in the "Commits" page.

<AccordionGroup>
  <Accordion title="A typical deployment lifecycle in Knock">
    <ol>
      <li>
        Introduce any backend changes to support a new workflow (such as users
        and preference properties).
      </li>
      <li>
        Build the workflow in a development environment in Knock and commit it
        to that environment.
      </li>
      <li>Test the workflow.</li>
      <li>When you're ready to go live, promote the workflow to production.</li>
    </ol>
  </Accordion>
</AccordionGroup>

<Callout
  type="tip"
  title="Production write access."
  text={
    <>
      In some cases you may want to enable your team to create content directly
      in production.
      <br />
      <br />
      With <a href="/version-control/environments#production-write-access">
        production write access
      </a> enabled, you can edit lower-risk resources directly in production instead
      of using promotion. Promotion is still available for higher-risk resources
      that need to follow the environment lifecycle.
    </>
  }
/>

## Reverting a commit

If you've made a change in a commit that you want to revert, you can use the "Revert commit" feature to "undo" that change. You can find the revert commit action on the **Commits** page in the dashboard, under the "Unpromoted changes" and "Commit log" tabs.

<Callout
  title="Note:"
  text={
    <>
      you can only revert a commit in the development environment. If you need
      to revert a change to a higher environment, you must first revert it in
      development and then promote the revert commit.
    </>
  }
/>

**Reverting a commit will**:

- Create a new commit with a message that indicates the commit reverts a preceding commit
- Wind back the state of the resource to the change that precedes the commit
- Undo any uncommitted changes on the resource

Because the revert will produce a new commit, you can then promote that commit to other environments to make that change live in those environments.
