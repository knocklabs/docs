---
title: Message types
description: Message types map the components in your application to the guide editing experience in Knock.
section: Building in-app UI
---

<Callout
  emoji="üöß"
  bgColor="blue"
  text={
    <>
      Message types are currently in beta. If you'd like early access, or this
      is blocking your adoption of Knock, please{" "}
      <a href="mailto:support@knock.app?subject=Guides%20beta%20access">
        get in touch
      </a>
      .
    </>
  }
/>

A message type maps to a UI component/element in your product that you show to your users.

Once a message type exists, you can use it to create [guides](/concepts/guides) to render non-feed messages in your product.

<Image
  src="/images/concepts/guides/DraftingGuideContent - messageTypeDropdown.png"
  alt="In-app message types"
  className="rounded-md mx-auto border border-gray-200"
  width={1243}
  height={457}
/>

<Callout
  emoji="üå†"
  text={
    <>
      <span className="font-bold">Feeds v. guides.</span> To learn more about
      the difference between feeds and guides, see our{" "}
      <a href="/in-app-ui/feeds-vs-guides">feeds v. guides doc</a>.
    </>
  }
/>

## Overview

A message type has:

- **A schema.** A schema defines the fields a message type will have in the template editor and forms the structure of the message contents returned by the [guides API](/mapi-reference/message_types/schemas/message_type).
- **At least one variant.** Message types can have one or more variants.
- **A template preview.** A template preview is a visual representation of what the message type will look like in the template editor.

### Variants

A message type can have one or more _variants_. For example, the `card` template type comes with 3 variants:

- **Default.** Content with an action URL to determine where the cell should route to.
- **Single action.** Content with a single primary button.
- **Multi-action.** Content with two buttons, one primary and one secondary.

When creating an in-app template, your content editors can select from the available variants and customize the message's contents based on the selected variant.

### Schemas

A message type has a schema that defines the fields a message type will have in the template editor and forms the structure of the message contents generated when a message is produced from an in-app step.

You can think of the schema as a blueprint for how the content editor will create the message template and what fields can be edited within that experience.

<AccordionGroup>
  <Accordion title="A schema example">
    As an example, the `Banner` schema is defined as:

```json
{
  "variants": [
    {
      "key": "default",
      "name": "Default",
      "fields": [
        {
          "type": "text",
          "key": "title",
          "label": "Title",
          "settings": {
            "required": true,
            "description": null,
            "default": "Banner title",
            "minLength": null,
            "maxLength": null
          }
        },
        {
          "type": "textarea",
          "key": "body",
          "label": "Body",
          "settings": {
            "required": true,
            "description": null,
            "default": "Copy about a feature or an action that the user should be aware of.",
            "minLength": null,
            "maxLength": null
          }
        },
        {
          "type": "boolean",
          "key": "dismissible",
          "label": "Dismissible?",
          "settings": {
            "required": false,
            "description": null,
            "default": true
          }
        }
      ]
    },
    {
      "key": "single-action",
      "name": "Single-action",
      "fields": [
        {
          "type": "text",
          "key": "title",
          "label": "Title",
          "settings": {
            "required": true,
            "description": null,
            "default": "Banner title",
            "minLength": null,
            "maxLength": null
          }
        },
        {
          "type": "textarea",
          "key": "body",
          "label": "Body",
          "settings": {
            "required": true,
            "description": null,
            "default": "Copy about a feature or an action that the user should be aware of.",
            "minLength": null,
            "maxLength": null
          }
        },
        {
          "type": "boolean",
          "key": "dismissible",
          "label": "Dismissible?",
          "settings": {
            "required": false,
            "description": null,
            "default": true
          }
        },
        {
          "type": "button",
          "key": "primary_button",
          "label": "Primary button",
          "text": {
            "type": "text",
            "key": "text",
            "label": "Button text",
            "settings": {
              "required": true,
              "description": null,
              "default": "Primary",
              "minLength": null,
              "maxLength": null
            }
          },
          "action": {
            "type": "text",
            "key": "action",
            "label": "Button action",
            "settings": {
              "required": true,
              "description": null,
              "default": "action",
              "minLength": null,
              "maxLength": null
            }
          },
          "settings": {
            "required": true,
            "description": null
          }
        }
      ]
    },
    {
      "key": "multi-action",
      "name": "Multi-action",
      "fields": [
        {
          "type": "text",
          "key": "title",
          "label": "Title",
          "settings": {
            "required": true,
            "description": null,
            "default": "Banner title",
            "minLength": null,
            "maxLength": null
          }
        },
        {
          "type": "textarea",
          "key": "body",
          "label": "Body",
          "settings": {
            "required": true,
            "description": null,
            "default": "Copy about a feature or an action that the user should be aware of.",
            "minLength": null,
            "maxLength": null
          }
        },
        {
          "type": "boolean",
          "key": "dismissible",
          "label": "Dismissible?",
          "settings": {
            "required": false,
            "description": null,
            "default": true
          }
        },
        {
          "type": "button",
          "key": "primary_button",
          "label": "Primary button",
          "text": {
            "type": "text",
            "key": "text",
            "label": "Button text",
            "settings": {
              "required": true,
              "description": null,
              "default": "Primary",
              "minLength": null,
              "maxLength": null
            }
          },
          "action": {
            "type": "text",
            "key": "action",
            "label": "Button action",
            "settings": {
              "required": true,
              "description": null,
              "default": "action",
              "minLength": null,
              "maxLength": null
            }
          },
          "settings": {
            "required": true,
            "description": null
          }
        },
        {
          "type": "button",
          "key": "secondary_button",
          "label": "Secondary button",
          "text": {
            "type": "text",
            "key": "text",
            "label": "Button text",
            "settings": {
              "required": true,
              "description": null,
              "default": "Secondary",
              "minLength": null,
              "maxLength": null
            }
          },
          "action": {
            "type": "text",
            "key": "action",
            "label": "Button action",
            "settings": {
              "required": true,
              "description": null,
              "default": "action",
              "minLength": null,
              "maxLength": null
            }
          },
          "settings": {
            "required": true,
            "description": null
          }
        }
      ]
    }
  ]
}
```

If the editor creates an in-app message template using the ‚Äúdefault‚Äù variant for this component, then the structure of a generated message‚Äôs content will be:

```json
{
  "content": {
    "body": "<p>Hello this is my message</p>",
    "action_url": "https://knock.app"
  }
}
```

    </Accordion>

</AccordionGroup>

### Template previews

A template preview is a visual representation of what the message type will look like in the template editor.

You draft template previews using HTML, CSS, and Liquid.

You can reference variables from your schema to customize the preview, like this:

```js title="Using a variable"
<div class="modal__body">{{ body }}</div>
```

You can also reference variant keys to customize the preview based on the variant that is selected in the template editor, like this:

```js title="Using a variant"
{% if variant == "single-action" or variant == "multi-action" %}
<div class="modal__footer">
  <button class="modal__btn">{{ primary_button.text }}</button>

  {% if variant == "multi-action" %}
  <button class="modal__btn modal__btn--secondary">
    {{ secondary_button.text }}
  </button>
  {% endif %}
</div>
{% endif %}
```

## Pre-built message types

Knock comes with the following pre-built messages types to use out-of-the-box, each of which maps to a component you‚Äôll find in [`@knocklabs/react`](https://www.npmjs.com/package/@knocklabs/react).

- Banner (`<Banner />`)
- Modal (`<Modal />` )
- Card (`<Card />`)

<Image
  src="/images/concepts/guides/KnockPrebuiltComponents.png"
  alt="Pre-built components"
  className="rounded-md mx-auto"
  width={1243}
  height={457}
/>

## Headless message types

You can also create your own message types that map to your own UI components.

An in-app message schema has the following structure:

```json
{
  // One or more variants for this message type
  "variants": [
    {
      // A unique key for the variant (required)
      "key": "default",
      // A name for the variant, displayed in the message editor
      "name": "Default",
      // One or more fields for this variant
      "fields": []
    }
  ]
}
```

### Variants

Your schema must have one or more variants. Each of these variants must have:

- A `key` uniquely identifying the variant for the message type
- A `name` to display in the message template editor to select the variant
- One or more `fields` (see below)

Every schema must define a variant with the key `"default"`. You can name your variants anything you would like, but the variant key must be unique.

### Fields

All fields must have:

- `type`: The type of the field to render (see below)
- `key`: A unique key for the field in the variant
- `label`: A label to render

### Field types

<AccordionGroup>
  <Accordion title="Text">
A plain text, single line text field.

**Settings**

- `required` (boolean): indicates this field is required
- `description` (string): an optional friendly description
- `default` (string): The default value to display
- `minLength` (integer): The minimum length to validate
- `maxLength` (integer): The maximum length to validate against

**Example**

```json
{
  "type": "text",
  "key": "title",
  "label": "Title",
  "settings": {
    "required": true,
    "default": "Card title",
    "minLength": 3,
    "maxLength": 32
  }
}
```

  </Accordion>
  <Accordion title="Markdown">
A markdown editor for creating rich text. Will always be rendered as HTML.

**Settings**

- `required` (boolean): indicates this field is required
- `description` (string): an optional friendly description
- `default` (string): The default value to display

```json
{
  "type": "markdown",
  "key": "body",
  "label": "Body",
  "settings": {
    "default": "**Default markdown**"
  }
}
```

  </Accordion>
  <Accordion title="Textarea">
A multi-line plain text area

**Settings**

- `required` (boolean): indicates this field is required
- `description` (string): an optional friendly description
- `default` (string): The default value to display
- `minLength` (integer): The minimum length to validate
- `maxLength` (integer): The maximum length to validate against

**Example**

```json
{
  "type": "textarea",
  "key": "body",
  "label": "Body",
  "settings": {
    "default": "My body"
  }
}
```

  </Accordion>
  <Accordion title="Boolean">
  A checkbox that returns either true or false (checked or unchecked).

**Settings**

- `required` (boolean): indicates this field is required
- `description` (string): an optional friendly description
- `default` (boolean): The default value to set

**Example**

```json
{
  "type": "boolean",
  "key": "dismissable",
  "label": "Can be dismissed?",
  "settings": {
    "default": true
  }
}
```

  </Accordion>
  <Accordion title="Select">
    A single select box that defines a static list of options for editors to pick from.

    **Settings**

    - `options` (object[]): A list of option objects that must include a `label` and a `value`
    - `required` (boolean): indicates this field is required
    - `default` (string): The value of the default option to set

    **Example**

    ```json
    {
      "type": "select",
      "key": "icon",
      "label": "Icon",
      "settings": {
        "options": [{ "label": "Skull", "value": "skull" }]
      }
    }
    ```

  </Accordion>
  <Accordion title="Multi-select">
    A multi-select box that defines a static list of options for editors to pick from.

    **Settings**

    - `options` (object[]): A list of option objects that must include a `label` and a `value`
    - `required` (boolean): indicates this field is required
    - `default` (string[]): The values of the default options to set

      **Example**

    ```json
    {
      "type": "multi_select",
      "key": "icons",
      "label": "Icons",
      "settings": {
        "options": [
          { "label": "Skull", "value": "skull" },
          { "label": "Heart", "value": "heart" }
        ],
        "default": ["skull"]
      }
    }
    ```

  </Accordion>
  <Accordion title="Button">
    A button, with text to display and an action to perform when clicked.

    Every button field contains two subfields:

    - `text`: A text field that represents the button's text
    - `action`: A text field that represents the button's action

    **Settings**

    - `required` (boolean): indicates this field is required
    - `description` (string): an optional friendly description

    **Example**

    ```json
    {
      "type": "button",
      "key": "primary_button",
      "label": "Primary button",
      "text": {
        "type": "text",
        "key": "text",
        "label": "Button text",
        "settings": {
          "required": true,
          "default": "Learn more"
        }
      },
      "action": {
        "type": "text",
        "key": "action",
        "label": "Button action",
        "settings": {
          "required": true,
          "default": "https://example.com/"
        }
      },
      "settings": {
        "required": true
      }
    }
    ```

  </Accordion>
  <Accordion title="URL">
    **Settings**

    - `required` (boolean): indicates this field is required
    - `description` (string): an optional friendly description
    - `default` (string): The default URL to display

    **Example**

    ```json
    {
      "type": "url",
      "key": "contact_url",
      "label": "Contact link",
      "settings": {
        "required": true,
        "default": "https://example.com/"
      }
    }
    ```

  </Accordion>
  <Accordion title="Image">
    An image field, used to display an image with alt text and an optional action to perform when clicked.

    Every image field contains three subfields:

    - `url`: A URL field that represents the source of the image to be displayed
    - `alt`: A text field that represents the image's alt text
    - `action`: An optional text field that represents an action to perform when the image is clicked

    **Settings**

    - `required` (boolean): indicates this field is required
    - `description` (string): an optional friendly description

    **Example**

    ```json
    {
      "type": "image",
      "key": "hero_image",
      "label": "Hero image",
      "url": {
        "type": "url",
        "key": "url",
        "label": "Image URL",
        "settings": {
          "required": true,
          "default": "https://example.com/image.png"
        }
      },
      "alt": {
        "type": "text",
        "key": "alt",
        "label": "Image alt text",
        "settings": {
          "required": true,
          "default": "Lorem ipsum"
        }
      },
      "action": {
        "type": "text",
        "key": "action",
        "label": "Image action",
        "settings": {
          "required": true,
          "default": "https://example.com/"
        }
      },
      "settings": {
        "required": true
      }
    }
    ```

  </Accordion>
</AccordionGroup>

## Versioning message types

Message types are versioned using Knock‚Äôs commit model, meaning changes to a message type schema are committed into the current environment.

When you make an update to a message type, any templates using that message type will continue to use the old version until you explicitly update the template to use the new version. You can do this by navigating to the template in the Knock dashboard and clicking the "Update" button.
