---
title: "Build your own guide component (headless)"
description: How to build custom guide component using our React hooks and client library.
section: Building in-app UI > Guides
---

Using our `@knocklabs/react` and `@knocklabs/client` libraries, you can create fully custom guide components that are backed by the Knock Guide API and real-time service.

<Callout
  emoji="ðŸš¨"
  text={
    <>
      <span className="font-bold">Note:</span> You must be on @knocklabs/react
      version 0.7.31 or higher in order to use our new Guides related features.
      Older SDK versions do not have this capability.
    </>
  }
/>

<Steps titleSize="h2">
  <Step title="Install the Knock React SDK.">
    ```bash
    npm install @knocklabs/react
    ```
  </Step>
  <Step title="Setup the KnockGuideProvider within your product.">

    You'll need to ensure the guide provider is a child component of the `KnockProvider`. You can find the `channelId` for your guide on the guide details page in the dashboard.

    ```tsx title="Setup the KnockGuideProvider within your product."
    import { KnockProvider, KnockGuideProvider } from "@knocklabs/react";
    import { useCurrentUser } from "@/lib/hooks";

    const MyApplication = () => {
      // Get your authenticated current user
      const currentUser = useCurrentUser();

      return (
        <KnockProvider
          apiKey={process.env.NEXT_PUBLIC_KNOCK_API_KEY}
          user={{ id: currentUser.id }}
        >
          <KnockGuideProvider
            channelId={process.env.NEXT_PUBLIC_KNOCK_GUIDE_CHANNEL_ID}
            // A boolean property that controls when guides are ready to be shown
            // use when you are working with async data
            readyToTarget
            // When set to true (default), starts a websocket
            listenForUpdates
            targetParams={
              {
                // an optional set of data to pass
                // data: { foo: "bar" },
                // tenant: workspace.id,
              }
            }
          >
            <Header />
            <Sidebar />
            {/* Rest of your app */}
          </KnockGuideProvider>
        </KnockProvider>
      );
    };
    ```

  </Step>
  <Step title="Setup a custom message type.">
    If you're not using one of our pre-built message types, you'll need to set up a custom message type. You can learn more about how to do this in our [message types](/in-app-ui/message-types/create-message-types) documentation.
  </Step>
  <Step title="Create a guide.">
    You can learn more about how to create a guide in our [creating guides](/in-app-ui/guides/create-guides) documentation.
  </Step>
  <Step title="Build a component to render your guide.">
    Next, you'll need to build a component to render your guide. You can use the `useGuide` hook to get the current guide step and render it. You'll either want to find a guide by its message type or by the guide key.

    ```tsx
    import { useEffect } from "react";
    import { useGuide } from "@knocklabs/react";

    const ChangelogCard = () => {
      const { step } = useGuide({ type: "changelog-card" });

      useEffect(() => {
        if (step) step.markAsSeen();
      }, [step]);

      if (!step) return null;

      return (
        <div onClick={() => step.markAsInteracted()}>
          <h3>{step.content.title}</h3>
          <p>{step.content.body}</p>
        </div>
      );
    };
    export ChangelogCard;
    ```

  </Step>
  <Step title="Mount your component under the KnockGuideProvider.">
    Once mounted in your application tree, if your user becomes eligible for the guide, then the component will be rendered and displayed to your users.

    ```tsx
    import { ChangelogCard } from "@/components/ChangelogCard";

    const Sidebar = () => {
      return (
        <div>
          {/* Rest of my sidebar */}
          <ChangelogCard />
        </div>
      );
    };
    ```

  </Step>
</Steps>

## Other cases

### Rendering multiple guides

If you want to fetch multiple guides of the same message type, you can use the `useGuides` hook for use in your component.

```tsx
import { useGuides } from "@knocklabs/react";

const MyComponent = () => {
  const { guides } = useGuides({ type: "changelog-card" });

  return (
    <div>
      {guides.map((guide) => (
        <div key={guide.key}>{guide.step.content.title}</div>
      ))}
    </div>
  );
};
```

### Typing the guide step content

If you're using a custom message type, you can type the guide step content to ensure type safety.

```tsx
import { useGuide } from "@knocklabs/react";

type MyMessageTypeAttrs = {
  title: string;
  body: string;
};

const MyComponent = () => {
  const { step } = useGuide<MyMessageTypeAttrs>({ type: "my-message-type" });

  return (
    <div>
      <h1>{step.content.title}</h1>
      <p>{step.content.body}</p>
    </div>
  );
};

export MyComponent;
```

## Advanced: working with the `GuideClient`

In certain cases, you may need to drop down to operate on the guide client, which is the state management layer automatically created when you mount a `GuideProvider`.

You can always access the guide client by using the `useGuideContext` hook:

```tsx
const { client: guideClient } = useGuideContext();
```

One use case for accessing the guide client is to force a refetch of the users eligible guides, which you can do through the `guideClient.fetch()` method.
